{"ast":null,"code":"var os = require('os');\n\nvar common = require('./common');\n\ncommon.register('cd', _cd, {}); //@\n//@ ### cd([dir])\n//@\n//@ Changes to directory `dir` for the duration of the script. Changes to home\n//@ directory if no argument is supplied.\n\nfunction _cd(options, dir) {\n  if (!dir) dir = os.homedir();\n\n  if (dir === '-') {\n    if (!process.env.OLDPWD) {\n      common.error('could not find previous directory');\n    } else {\n      dir = process.env.OLDPWD;\n    }\n  }\n\n  try {\n    var curDir = process.cwd();\n    process.chdir(dir);\n    process.env.OLDPWD = curDir;\n  } catch (e) {\n    // something went wrong, let's figure out the error\n    var err;\n\n    try {\n      common.statFollowLinks(dir); // if this succeeds, it must be some sort of file\n\n      err = 'not a directory: ' + dir;\n    } catch (e2) {\n      err = 'no such file or directory: ' + dir;\n    }\n\n    if (err) common.error(err);\n  }\n\n  return '';\n}\n\nmodule.exports = _cd;","map":null,"metadata":{},"sourceType":"script"}